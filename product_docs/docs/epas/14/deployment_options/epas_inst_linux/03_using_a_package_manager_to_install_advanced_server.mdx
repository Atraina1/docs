---
title: "Using a package manager to install EDB Postgres Advanced Server"
---


You can use the `dnf` or `yum` package manager to install EDB Postgres Advanced Server or EDB Postgres Advanced Server supporting components. `dnf` or `yum` attempt to satisfy package dependencies as it installs a package, but requires access to the EDB Postgres Advanced Server repositories. If your system does not have access to a repository via the Internet, you can use RPM to install an individual package or create a local repository, but you may be required to manually satisfy package dependencies.

You can list the dependencies of a package by running the following command:

-   On Fedora | RHEL | CentOS | Rocky Linux | AlmaLinux: `repoquery --requires --resolve <package_name>`
-   On Debian | Ubuntu: `apt-cache depends <package_name>`

Where, `package_name` is the name of the package that you want to install.

Installing the server package creates a database superuser named `enterprisedb`. The user is assigned a user ID (UID) and a group ID (GID) of `26`. The user has no default password; use the `passwd` command to assign a password for the user. The default shell for the user is `bash`, and the user's home directory is `/var/lib/edb/as14`.

By default, EDB Postgres Advanced Server logging is configured to write files to the `log` subdirectory of the `data` directory, rotating the files each day and retaining one week of log entries. You can customize the logging behavior of the server by modifying the `postgresql.conf` file. For more information about `Modifying the postgresql.conf File`, see the *EDB Postgres Advanced Server Guide* available at:

[https://www.enterprisedb.com/docs](/epas/latest/)


## Installation prerequisites

Before using an RPM package to install EDB Postgres Advanced Server on a Linux host, you must:

**Install Linux-specific software**

You must install `xterm, konsole`, or `gnome-terminal` before executing any console-based program installed by EDB installers.

**Install Migration Toolkit or EDB\*Plus installation prerequisites (optional)**

Before using an RPM to install Migration Toolkit or EDB\*Plus, you must first install Java version 1.8 or later. On a Linux system, you can use the `dnf` or `yum` package manager to install Java. Open a terminal window, assume superuser privileges, and enter:

-   On RHEL or CentOS 7:

    ```text
    # yum -y install java
    ```

-   On RHEL or Rocky Linux or AlmaLinux 8:

    ```text
    # dnf -y install java
    ```

Follow the onscreen instructions to complete the installation.

**Request credentials to the EDB repository**

Before installing the repository configuration file, you must have credentials that allow access to the EDB repository. For information about requesting credentials, visit the EDB website at:

<https://www.enterprisedb.com/user/login>

After receiving your repository credentials you can:

-   Create the repository configuration file.
-   Modify the file, providing your user name and password.
-   Install the repository keys and additional prerequisite software.
-   Install EDB Postgres Advanced Server and supporting components.


### Updating an RPM installation

If you have an existing EDB Postgres Advanced Server RPM installation, you can use `yum` or `dnf` to upgrade your repository configuration file and update to a more recent product version. To update the `edb.repo` file, assume superuser privileges and enter:

-   On RHEL or CentOS 7:

    ```text
    yum upgrade edb-repo
    ```

-   On RHEL or Rocky Linux or AlmaLinux 8:

    ```text
    dnf upgrade edb-repo
    ```

`yum` or `dnf` updates the `edb.repo` file to enable access to the current EDB repository, configured to connect with the credentials specified in your `edb.repo` file. Then, you can use `yum` or `dnf` to upgrade all packages whose names include the expression `edb`:

-   On RHEL or CentOS 7:

    ```text
    yum upgrade edb*
    ```

-   On RHEL or Rocky Linux or AlmaLinux 8:

    ```text
    dnf upgrade edb*
    ```

!!! Note
    The `yum upgrade` or `dnf upgrade` command perform an update only between minor releases; to update between major releases, you must use `pg_upgrade`.

For more information about using yum commands and options, enter `yum --help` on your command line.

For more information about using `dnf` commands and options, visit:

<https://docs.fedoraproject.org/en-US/quick-docs/dnf/>


**Managing authentication on a Debian or Ubuntu host**

By default, the server is running with the peer or md5 permission on a Debian or Ubuntu host. You can change the authentication method by modifying the `pg_hba.conf` file, located under `/etc/edb-as/14/main/`.

For more information about modifying the `pg_hba.conf` file, see the PostgreSQL core documentation available at:

<https://www.postgresql.org/docs/current/auth-pg-hba-conf.html>


## Configuring a package installation

The packages that install the database server component create a unit file (on version 7.x or 8.x hosts) and service startup scripts.

### Creating a database cluster and starting the service

The PostgreSQL `initdb` command creates a database cluster; when installing EDB Postgres Advanced Server with an RPM package, the `initdb` executable is in `/usr/edb/asx.x/bin`. After installing EDB Postgres Advanced Server, you must manually configure the service and invoke `initdb` to create your cluster. When invoking `initdb`, you can:

-   Specify environment options on the command line.
-   Include the `systemd` service manager on RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x and use a service configuration file to configure the environment.

To review the `initdb` documentation, visit:

<https://www.postgresql.org/docs/current/static/app-initdb.html>

After specifying any options in the service configuration file, you can create the database cluster and start the service; these steps are platform specific.

**On RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x**

To invoke `initdb` on a RHEL/CentOS 7.x or Rocky Linux/AlmaLinux 8.x system, with the options specified in the service configuration file, assume the identity of the operating system superuser:

```text
su - root
```

To initialize a cluster with the non-default values, you can use the `PGSETUP_INITDB_OPTIONS` environment variable by invoking the `edb-as-14-setup` cluster initialization script that resides under `EPAS_Home/bin`.

To invoke `initdb` export the `PGSETUP_INITDB_OPTIONS` environment variable with the following command:

```text
PGSETUP_INITDB_OPTIONS="-E UTF-8" /usr/edb/as14/bin/edb-as-14-setup initdb
```

After creating the cluster, use `systemctl` to start, stop, or restart the service:

```text
systemctl { start | stop | restart } edb-as-14
```

**On Debian 9.x | 10.x or Ubuntu 18.04 | 20.04**

You can initialize multiple clusters using the bundled scripts. To create a new cluster, assume `root` privileges, and invoke the bundled script:

```text
/usr/bin/epas_createcluster 14 main2
```

To start a new cluster, use the following command:

```text
/usr/bin/epas_ctlcluster 14 main2 start  
```

To list all the available clusters, use the following command:

```text
/usr/bin/epas_lsclusters
```

!!! Note
    The data directory is created under `/var/lib/edb-as/14/main2` and configuration directory is created under `/etc/edb-as/14/main/`.

#### Specifying cluster options with INITDBOPTS

You can use the `INITDBOPTS` variable to specify your cluster configuration preferences. By default, the `INITDBOPTS` variable is commented out in the service configuration file; unless modified, when you run the service startup script, the new cluster is created in a mode compatible with Oracle databases. Clusters created in this mode contain a database named `edb`, and have a database superuser named `enterprisedb`.

##### Initializing the cluster in Oracle mode

If you initialize the database using Oracle compatibility mode, the installation includes:

-   Data dictionary views compatible with Oracle databases.
-   Oracle data type conversions.
-   Date values displayed in a format compatible with Oracle syntax.
-   Support for Oracle-styled concatenation rules (if you concatenate a string value with a `NULL` value, the returned value is the value of the string).
-   Support for the following Oracle built-in packages.

| Package          | Functionality compatible with Oracle databases                                                                                                                               |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `dbms_alert`     | Provides the capability to register for, send, and receive alerts.                                                                                                           |
| `dbms_job`       | Provides the capability for the creation, scheduling, and managing of jobs.                                                                                                  |
| `dbms_lob`       | Provides the capability to manage on large objects.                                                                                                                          |
| `dbms_output`    | Provides the capability to send messages to a message buffer, or get messages from the message buffer.                                                                       |
| `dbms_pipe`      | Provides the capability to send messages through a pipe within or between sessions connected to the same database cluster.                                                   |
| `dbms_rls`       | Enables the implementation of Virtual Private Database on certain EDB Postgres Advanced Server database objects.                                                                          |
| `dbms_sql`       | Provides an application interface to the EDB dynamic SQL functionality.                                                                                                      |
| `dbms_utility`   | Provides various utility programs.                                                                                                                                           |
| `dbms_aqadm`     | Provides supporting procedures for Advanced Queueing functionality.                                                                                                          |
| `dbms_aq`        | Provides message queueing and processing for EDB Postgres Advanced Server.                                                                                                                |
| `dbms_profiler`  | Collects and stores performance information about the PL/pgSQL and SPL statements that are executed during a performance profiling session.                                  |
| `dbms_random`    | Provides a number of methods to generate random values.                                                                                                                      |
| `dbms_redact`    | Enables the redacting or masking of data that is returned by a query.                                                                                                        |
| `dbms_lock`      | Provides support for the `DBMS_LOCK.SLEEP` procedure.                                                                                                                        |
| `dbms_scheduler` | Provides a way to create and manage jobs, programs, and job schedules.                                                                                                       |
| `dbms_crypto`    | Provides functions and procedures to encrypt or decrypt RAW, BLOB or CLOB data. You can also use `DBMS_CRYPTO` functions to generate cryptographically strong random values. |
| `dbms_mview`     | Provides a way to manage and refresh materialized views and their dependencies.                                                                                              |
| `dbms_session`   | Provides support for the `DBMS_SESSION.SET_ROLE` procedure.                                                                                                                  |
| `utl_encode`     | Provides a way to encode and decode data.                                                                                                                                    |
| `utl_http`       | Provides a way to use the HTTP or HTTPS protocol to retrieve information found at an URL.                                                                                    |
| `utl_file`       | Provides the capability to read from, and write to files on the operating system’s file system.                                                                              |
| `utl_smtp`       | Provides the capability to send e-mails over the Simple Mail Transfer Protocol (SMTP).                                                                                       |
| `utl_mail`       | Provides the capability to manage e-mail.                                                                                                                                    |
| `utl_url`        | Provides a way to escape illegal and reserved characters within an URL.                                                                                                      |
| `utl_raw`        | Provides a way to manipulate or retrieve the length of raw data types.                                                                                                       |


##### Initializing the cluster in Postgres mode

Clusters created in PostgreSQL mode don't include compatibility features. To create a new cluster in PostgreSQL mode, remove the pound sign (#) in front of the `INITDBOPTS` variable, enabling the `"--no-redwood-compat"` option. Clusters created in PostgreSQL mode contain a database named `postgres` and have a database superuser named `postgres`.

You may also specify multiple `initdb` options. For example, the following statement:

```text
INITDBOPTS="--no-redwood-compat -U alice --locale=en_US.UTF-8"
```

Creates a database cluster (without compatibility features for Oracle) that contains a database named `postgres` that is owned by a user named `alice`; the cluster uses `UTF-8` encoding.

If you initialize the database using `"--no-redwood-compat"` mode, the installation includes the following package:

| Package            | Functionality noncompatible with Oracle databases                                                               |
| ------------------ | ---------------------------------------------------------------------------------------------------------------- |
| `dbms_aqadm`       | Provides supporting procedures for Advanced Queueing functionality.                                              |
| `dbms_aq`          | Provides message queueing and processing for EDB Postgres Advanced Server.                                                    |
| `edb_bulkload`     | Provides direct/conventional data loading capability when loading huge amount of data into a database.           |
| `edb_gen`          | Provides miscellaneous packages to run built-in packages.                                                        |
| `edb_objects`      | Provides Oracle compatible objects such as packages, procedures etc.                                             |
| `waitstates`       | Provides monitor session blocking.                                                                               |
| `edb_dblink_libpq` | Provides link to foreign databases via libpq.                                                                    |
| `edb_dblink_oci`   | Provides link to foreign databases via OCI.                                                                      |
| `snap_tables`      | Creates tables to hold wait information. Included with DRITA scripts.                                            |
| `snap_functions`   | Creates functions to return a list of snap ids and the time the snapshot was taken. Included with DRITA scripts. |
| `sys_stats`        | Provides OS performance statistics.                                                                              |

In addition to the cluster configuration options documented in the PostgreSQL core documentation, EDB Postgres Advanced Server supports the following `initdb` options:

`--no-redwood-compat`

Include the `--no-redwood-compat` keywords to instruct the server to create the cluster in PostgreSQL mode. When the cluster is created in PostgreSQL mode, the name of the database superuser is `postgres`, the name of the default database is `postgres`, and EDB Postgres Advanced Server’s features compatible with Oracle databases aren't available to the cluster.

`--redwood-like`

Include the `--redwood-like` keywords to instruct the server to use an escape character (an empty string ('')) following the `LIKE` (or PostgreSQL-compatible `ILIKE`) operator in a SQL statement that is compatible with Oracle syntax.

`--icu-short-form`

Include the `--icu-short-form` keywords to create a cluster that uses a default ICU (International Components for Unicode) collation for all databases in the cluster. For more information about Unicode collations, refer to the *EDB Postgres Advanced Server Guide* available at:

[https://www.enterprisedb.com/docs](/epas/latest/)

For more information about using `initdb`, and the available cluster configuration options, see the PostgreSQL Core Documentation available at:

<https://www.postgresql.org/docs/current/static/app-initdb.html>

You can also view online help for `initdb` by assuming superuser privileges and entering:

```text
/path_to_initdb_installation_directory/initdb --help
```

Where `path_to_initdb_installation_directory` specifies the location of the `initdb` binary file.

### Modifying the data directory location on RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x

On a RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x host, the unit file is named `edb-as-14.service` and resides in `/usr/lib/systemd/system`. The unit file contains references to the location of the EDB Postgres Advanced Server `data` directory. You should avoid making any modifications directly to the unit file because it may be overwritten during package upgrades.

By default, data files reside under `/var/lib/edb/as14/data` directory. To use a data directory that resides in a non-default location, perform the following steps:

-   Create a copy of the unit file under the `/etc` directory:

    ```text
    cp /usr/lib/systemd/system/edb-as-14.service /etc/systemd/system/
    ```

-   After copying the unit file to the new location, create the service file `/etc/systemd/system/edb-as-14.service`.

-   Update the following values with new location of data directory in the `/lib/systemd/system/edb-as-14.service` file:

    ```text
    Environment=PGDATA=/var/lib/edb/as14/data
    PIDFile=/var/lib/edb/as14/data/postmaster.pid
    ```

-   Delete the entire content of `/etc/systemd/system/edb-as-14.service` file, except the following line:

    ```text
    .include /lib/systemd/system/edb-as-14.service
    ```

-   Run the following command to initialize the cluster at the new location:

    ```text
    PGSETUP_INITDB_OPTIONS="-E UTF-8" /usr/edb/as14/bin/edb-as-14-setup initdb
    ```

-   Use the following command to reload `systemd`, updating the modified service scripts:

    ```text
    systemctl daemon-reload
    ```

-   Start the EDB Postgres Advanced Server service with the following command:

    ```text
    systemctl start edb-as-14
    ```

### Configuring SELinux policy to change the data directory location on RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x

By default, the data files resides under `/var/lib/edb/as14/data` directory. To change the default data directory location depending on individual environment preferences, you must configure the SELinux policy and perform the following steps:

-   Stop the server using the following command:

    ```text
    systemctl stop edb-as-14
    ```

-   Check the status of SELinux using the `getenforce` or `sestatus` command:

    ```text
    # getenforce
    Enforcing

    # sestatus
    SELinux status:                 enabled
    SELinuxfs mount:                /sys/fs/selinux
    SELinux root directory:         /etc/selinux
    Loaded policy name:             targeted
    Current mode:                   enforcing
    Mode from config file:          enforcing
    Policy MLS status:              enabled
    Policy deny_unknown status:     allowed
    Max kernel policy version:      31
    ```

-   Use the following command to view the SELinux context of the default database location:

    ```text
    ls -lZ /var/lib/edb/as14/data
    drwx------. enterprisedb enterprisedb unconfined_u:object_r:var_lib_t:s0 log
    ```

-   Create a new directory for a new location of the database using the following command:

    ```text
    mkdir /opt/edb
    ```

-   Use the following command to move the data directory to `/opt/edb`:

    ```text
    mv /var/lib/edb/as14/data /opt/edb/
    ```

-   Create a file `edb-as-14.service` under `/etc/systemd/system` directory to include the location of a new data directory:

    ```text
    .include /lib/systemd/system/edb-as-14.service
    [Service]
    Environment=PGDATA=/opt/edb/data
    PIDFile=/opt/edb/data/postmaster.pid
    ```

-   Use the `semanage` utility to set the context mapping for `/opt/edb/`. The mapping is written to `/etc/selinux/targeted/contexts/files/file.contexts.local` file.

    ```text
    semanage fcontext --add --equal /var/lib/edb/as14/data /opt/edb
    ```

-   Apply the context mapping using `restorecon` utility:

    ```text
    restorecon -rv /opt/edb/
    ```

-   Reload `systemd` to modify the service script using the following command:

    ```text
    systemctl daemon-reload
    ```

-   Now, the `/opt/edb` location has been labeled correctly with the context, use the following command to start the service:

    ```text
    systemctl start edb-as-14
    ```

## Starting multiple postmasters with different clusters

You can configure EDB Postgres Advanced Server to use multiple postmasters, each with its own database cluster. The steps required are version specific to the Linux host.

**On RHEL/CentOS 7.x or RHEL/Rocky Linux/AlmaLinux 8.x**

The `edb-as14-server-core` RPM for version 7.x | 8.x contains a unit file that starts the EDB Postgres Advanced Server instance. The file allows you to start multiple services, with unique `data` directories and that monitor different ports. You must have `root` access to invoke or modify the script.

The example that follows creates an EDB Postgres Advanced Server installation with two instances; the secondary instance is named `secondary`:

-   Make a copy of the default file with the new name. As noted at the top of the file, all modifications must reside under `/etc`. You must pick a name that is not already used in `/etc/systemd/system`.

    ```text
    cp /usr/lib/systemd/system/edb-as-14.service /etc/systemd/system/secondary-edb-as-14.service
    ```

-   Edit the file, changing `PGDATA` to point to the new `data` directory that you will create the cluster against.

-   Create the target `PGDATA` with user `enterprisedb`.

-   Run `initdb`, specifying the setup script:

    ```text
    /usr/edb/as14/bin/edb-as-14-setup initdb secondary-edb-as-14
    ```

-   Edit the `postgresql.conf` file for the new instance, specifying the port, the IP address, TCP/IP settings, etc.

-   Make sure that new cluster runs after a reboot:

    ```text
    systemctl enable secondary-edb-as-14
    ```

-   Start the second cluster with the following command:

    ```text
    systemctl start secondary-edb-as-14
    ```

