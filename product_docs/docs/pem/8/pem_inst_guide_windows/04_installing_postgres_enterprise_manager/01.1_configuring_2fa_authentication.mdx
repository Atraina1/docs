---
title: "Configuring the PEM Server to use Two-Factor Authentication"
---

!!! Tip "New Feature "
    Two-Factor Authentication (2FA) support is available in PEM 8.2.0 and later.

-   PEM supports two methods for 2FA:

    -   Email Authentication
    -   Authenticator App (e.g. Google Authenticator)

To enable 2FA, you can copy these settings from `config.py` file to `config_local.py` file and modify the values for the following parameters:

| Parameter   | Description |
| ----------- | ----------- |
| MFA_ENABLED | Set this to true, to enable the two-factor authentication. Default value is false. |
| MFA_FORCE_REGISTRATION | Set this to true, to ask the users to register forcefully for the two-factor authentication methods at login. Default value is false. |
| MFA_SUPPORTED_METHODS | PEM supports two-factor authentication either by sending an one-time code to an email or by using the TOTP based application. The possible values are `email` and `authenticator`. |
| MFA_EMAIL_SUBJECT | Set this to a value to be displayed as subject of the email for email authentication. Default value is `<APP_NAME> - Verification Code`. |


# Mail Server configuration

To use `email authentication` method, you need to configure Mail Server Settings.

PEM Server can send an email either using the `SMTP` configurations saved in the PEM configuration or using `Flask-Mail`.

To send the email verification code using the internal SMTP configuration from the PEM configuration, set the parameter `MAIL_USE_PEM_INTERNAL` to `True`. If set to `False`, following mail configuration will be used to send the code on the user specified email address:

-   MAIL_SERVER = 'localhost'
-   MAIL_PORT = 25
-   MAIL_USE_TLS = False
-   MAIL_USE_SSL = False
-   MAIL_USERNAME = None
-   MAIL_PASSWORD = None
-   MAIL_DEFAULT_SENDER = None

For more details about these configurations refer the [Flask-Mail documentation](https://pythonhosted.org/Flask-Mail/).