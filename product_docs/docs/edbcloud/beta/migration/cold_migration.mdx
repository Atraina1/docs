---
title: Importing an existing Postgres database
---

The simplest way to import a database in EDB Cloud is using logical backups taken with `pg_dump` and loaded using `pg_restore`. This approach provides a way to export and import a database across different versions of Postgres, including exporting from PostgreSQL and EDB Postgres Advanced Server versions prior to 10.

The high-level steps are:

1. Export existing roles 
1. Import existing roles
1. For each database, you are migrating:
   a. logical export using `pg_dump`
   b. import with `pg_restore`


## Is this the approach for you?

This approach requires suspension of write operations to the database application for the duration of the export/import process. The write operations can then be resumed on the new system. This is because `pg_dump` takes an online snapshot of the source database. As a result, the changes after the backup starts are not included in the output.

The required downtime depends on many factors, including:
 - Size of the database
 - Speed of the network between the two systems
 - Your team's familiarity with the migration procedure. 
 
 To minimize the downtime, you can test the process as many times as needed before the actual migration, as the export with `pg_dump` can be performed online and the process is repeatable and measurable.

## Before you begin

Ensure you: 
 - Understand the terminology conventions
 - Have the required Postgres client libraries
 - Can access the source and target database

### Terminology conventions

| Term | Alias | Description | 
| ---- | ----- | ---------- |
| source database | pg-source | PostgreSQL instance from which you want to import your data |
| target database | pg-target | PostgreSQL cluster in EDB Cloud where you want to import your data |
| migration host | pg-migration | Temporary Linux machine in your trusted network from which to execute the export of the database and the subsequent import into EDB Cloud. The migration host needs access to both the source and target database.  Or, if your source and target databases are on the same version of Postgres, it can serve as your migration host. |


### Postgres client libraries
The Postgres version of the target database of the following client libraries must be on the migration host:

- `pg_dumpall`
- `pg_dump`
- `pg_restore`
- `psql`

For example, if you want to import a PostgreSQL 9.6 database from your private network into a PostgreSQL 13 database in EDB Cloud, use the client libraries and binaries from version 13.

### Access to the source and target database

Access requirements:

- PostgreSQL superuser access to the source database host. This could be the `postgres` user or another user with `SUPERUSER` privileges.
- Access to the target database instance host in EDB Cloud as the `edb_admin` user.


To verify you have the proper access:
1. Connect to the source database using psql. For example: 
   ```
   psql -d “host=pg-source user=postgres dbname=postgres”
   ```
   Replace `pg-source` with the actual hostname or IP address of the source database and the `user` and `dbname` values as appropriate. If the connection does not work, contact your system and database administrators to make sure that you can access the source database (this might require changes to your `pg_hba.conf` and network settings). If `pg_hba.conf` is changed, the configuration should be reloaded with either `SELECT pg_reload_conf();` via a psql connection or `pg_ctl reload` in a shell connection to the database host.

1. Connect to the target database using the `edb_admin` user using psql. For example:
   ```
   psql -d “host=pg-target user=edb_admin dbname=edb_admin”
   ```
   Replace `pg-source` with the actual hostname of your EDB Cloud cluster.


