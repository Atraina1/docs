---
title: Virtual Network Peering Example
---

These are the steps to connect using Virtual Network Peering. 

#### Prerequisites

Assume that your EDB Cloud cluster is on a subscription called `development` and is being accessed from a client VM on another subscription `test`. To walk through an example in your own environment, you need: 
 - Your EDB Cloud cluster URL. You can find the URL in the **Connect** tab of your cluster instance in the EDB Cloud portal.
 -  IP address of your EDB Cloud cluster. For example:
   ```
  $ dig +short p-c4j0jfcmp3af2ieok5eg.brcxzr08qr7rbei1.edbcloud.io 
  10.240.1.218
 ```
 -  A Linux client VM called `vm-client` on subscription `test` with the following properties:
    -   Subscription: `test`
    -   resource group: `rg-client`
    -   virtual network: `vnet-client`
    -   virtual network subnet: `snet-client`
 - [psql Postgresql client](https://www.postgresql.org/download/) installed on your client VM.

#### Step 1: Create a virtual network peering link

You need to add two peerings links, one from the client VM's VNet `vnet-client` and the other from your EDB Cloud VNet `vnet-japaneast`. 

!!! Note
    In this example, you will create Virtual network peering for virtual networks that belong to subscriptions in the same Azure Active Directory tenants. For steps to create virtual network peering for virtual networks that belong to subscriptions in different Azure Active Directory tenants, see [peering virtual networks from different Azure Active Directory tenants](https://docs.microsoft.com/azure/virtual-network/create-peering-different-subscriptions).
    
1. From the **Peerings** page of the client VM's Virtual Network `vnet-client`, add two peering links called `peer-client-edb` and `peer-edb-client`, to join the address space of two virtual networks together. To simplify the process, Azure creates both peering links for you when you add peering from either side.

![](../images/image25.png)

![](../images/image7.png)

#### Step 2: Access EDB Cloud cluster PG service directly

Access the EDB Cloud cluster PG with its domain name from your cluster's connection string. It is accessible from `vnet-client` after peering.

 ```
 $ dig +short p-c4iabjleig4@jngmac48. bxcxztÃ©sqr7rbeil.enterprisedb.network 
 10.240.1.123 
       
 $ psql -h p-c41a6jleig4@jngmac48.brcxzreaqr7rbeil.enterprisedb.network -u edh_admin      
 Password for user edb_admin: 
 
 psql (13.4 (Ubuntu 13.4-1.pgdg28.84+1), server 13.4.8 (Debian 13.4.8-1+deb10)) 
 WARNING : psql major version 13, server major version 13. Some psql features might not work. 
 SSL connection (protocol : TLSV1.3cipherTLS_AES_256_GCM_SHA384, bits : 256, compression : off) Type "help" for help. 
 
 edb_admins=>
 
 ```
