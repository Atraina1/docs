---
title: Connecting your own cloud to BigAnimal
navTitle: Connecting your own cloud
description: "Use BigAnimal with your own cloud account" 
---

When you access BigAnimal for the first time you are brought to the Welcome page, where you start the process of setting up your identity provider (IDP). After setting up your identity provider, your identity provider can add users and you set up your cloud server provider (CSP). 

1. [Setting up your identity provider](#set-up-your-identity-provider)
1. [Add users through your identity provider](#manage-roles-for-added-users)
1. [Set up your cloud service provider](#set-up-your-cloud-service-provider)


## Setting up your identity provider

### SAML configuration

BigAnimal supports Single-Sign On through SAML identity providers. The SAML application enables access to BigAnimal for groups selected within your identity provider. You configure your SAML application to send a SAML assertion response to BigAnimal for each user.

The identity provider application provides:
- signature cert
- single sign-on URL (login url)
- issuer URI
- logout URL

The BigAnimal service provider provides:
- ACS URL
- SP Entity ID (Audience URI)
- metadata URL

You can copy the ACS URL and Audience URI from the Connection Info screen tab on the Set Up Identity Provider page to use when configuring your SAML application. The tab also includes information about mandatory attributes for the configuration.

The following SAML assertions are needed to map the customer user information in your identity provider application to BigAnimal:

- http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier
- http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name
- http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname
- http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname
- http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress

The actual mappings vary across different identity providers. For example, if you are using Azure AD, you can map a user's user principal name (UPN) to the emailaddress assertion. That user can then sign in to BigAnimal using their UPN instead of thier email address.

### Set Up Identity Provider page

1. On the **Connection Info** tab, copy the following URLs to use in your identity provider configuration:  
   
   | URL                            | Description |
   | ------------------------------ | ----------- |
   | Assertion Consumer Service URL | BigAnimal specific URL to which SAML assertions from your identity provider are sent. |
   | Audience URI                   | The entity or audience for which the SAML assertion is intended. |

1. Configure your identity provider to send the SAML response in the following format:
   - Provide an `NameID` element within the `Subject` element. Provide your email ID as the value to `NameID`. BigAnimal uses the email ID you provide as your username and primary email.
      
     For example:

     ![](../images/nameID.png)

   - The SAML response must include the following attributes:
      - `givenname`: BigAnimal uses the value as the given name in the profile of the authenticated user.
      - `surname`: BigAnimal uses the value as the surname in the profile of the authenticated user.

      For example:

      ![](../images/attributes.png)

1. In the **Set Up Identity Provider** page, enter the configuration information for your preferred SAML identity provider on the **Setup Configuration** tab:

THIS DOESN'T MATCH THE LATEST DESIGN.

   | Field | Description |
   | ----- | ----------- |
   | Issuer URL | URL string uniquely associated with your identity provider partner. |
   | Single Sign-On URL | |
   | Identity provider signature certificate | Identity provider's assertion signing certificate (.cer or .cert). Coordinate with your identity provider partner to obtain this certificate securely. Or can either choose the file or copy the contents directly. |
   | Request Binding | SAML Authentication Request Protocol binding used to send the authentication request (HTTP or HTTP POST). |
   | Response Signature Algorithm (RSA) Algorithm | The signature algorithm used to sign the SAML AuthNRequest (SHA or SHA-256). |
 
1. Select **Test Connection**. If you connected to your identity provider successfully, you are brought to the BigAnimal log in screen. If not, an error message displays. You can check your configuration and try again. If issues persist, contact Support. 

Once you set your identity provider is set up, you can view your connection status, ID, login URL, audience URI, and assertion consumer service URL on the **Admin > Identity Provider** page.

## Manage roles for added users

You add users through your identity provider. A user who is added in the identity provider is automatically added to BigAnimal. BigAnimal assigns them with the default role of reader. You manage roles and permissions from BigAnimal, see [Managing portal access](../../administering_cluster/01_portal_access/). 

!!! Note
    
    A user is only created in BigAnimal once they have logged in. Once they have logged in, their BigAnimal role can be changed.

## Set up your cloud service provider

EDB provides CLI commands that check whether requirements and resource limits are met in your cloud before linking to BigAnimal. An account owner or contributor can run these commands.

1. Log into BigAnimal.

1. On the Cloud Providers page in BigAnimal, select **Download BigAnimal CLI**.

1. Open the cloud shell in your browser.

1. Run the following command:

   ```
  setup-csp --provider 
          {--account-id | --subscription-id}
          --region
          [--instance-type --high-availability --networking | --skip-preflight]
          [--run]
          [--credential]
   ```
Run the command without any parameters to get help on its usage. (I DON'T KNOW IF THIS IS TRUE.)

1. Input your cloud provider and account ID or subscription ID. The CLI sets up the boundary policy, designates the role and access BigAnimal should have to your cloud provider, and checks and raises account limits as needed.



