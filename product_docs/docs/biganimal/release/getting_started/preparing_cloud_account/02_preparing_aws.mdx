---
title: "Preparing your AWS account"
---

BigAnimal requires you to configure your AWS account before you deploy your clusters. The configurations that you perform ensure that your AWS account is prepared to meet your clusters' requirements and resource limits, such as:

   - Is the AWS CLI is configured to access to your AWS account?
   - Is there sufficient limit on the number of vCPUs and Network Load Balancers (NLBs) left in your region?

## Check AWS account readiness for running BigAnimal

EDB provides a shell script called [biganimal-csp-preflight](https://github.com/EnterpriseDB/cloud-utilities/blob/main/aws/biganimal-csp-preflight), which automatically checks whether requirements and resource limits are met in your AWS account based on the clusters you plan to deploy.

1.  Open the [AWS Cloud Shell](https://console.aws.amazon.com/cloudshell) in your browser.
2.  From the AWS Cloud Shell, run the following command:  

    ```shell
    curl -sL https://raw.githubusercontent.com/EnterpriseDB/cloud-utilities/main/aws/biganimal-csp-preflight | bash -s <AWS-account-ID> <region> [options]
    ```
    Where the required arguments are:

    | Argument | Description |
    | -------- | ----------- |
    | &lt;target-subscription> | AWS account ID of your BigAnimal deployment. |
    | &lt;region> | AWS region where your clusters are being deployed. See [Supported regions](../../overview/03a_region_support) for a list of possible regions. |
    
    Possible options are:

    | Options | Description |
    | ------- | ----------- |
    | `-h` or `--help`| Displays the command help. |
    | `-i` or `--instance-type` | AWS instance type for the BigAnimal cluster. The help command provides a list of possible VM instance types. Choose the instance type that best suits your application and workload. Choose an instance type in the memory optimized ESv3 or ESv4 series for large data sets. Choose from the compute optimized FSv2 series for compute bound applications. Choose from the general purpose DSv3 or DSv4 series if you don't require memory or compute optimization. |
    | `-a` or `--high-availability` | Enables high availability for the cluster. See [Supported architectures](../../overview/02_high_availability) for more information.|
    | `-e` or `--endpoint` | Type of network endpoint for the BigAnimal cluster, either **public** or **private**. See [Cluster networking architecture](../creating_a_cluster/01_cluster_networking) for more information. |
    | `-r` or `--activate-region` | Specifies region activation if no clusters currently exist in the region. |
    | `--onboard` | Checks if the user and subscription are correctly configured. 
    
    The behavior of the script defaults to `--onboard` if you provide no other options.

    For example, if you want to deploy a cluster in an AWS account having an ID of `12412ab3d-1515-2217-96f5-0338184fcc04`, with an instance type of `e2s_v3`, in the `eastus2` region, in a `public` network, and with no existing cluster deployed, run the following command:

    ```shell
    curl -sL https://raw.githubusercontent.com/EnterpriseDB/cloud-utilities/main/aws/biganimal-csp-preflight | bash -s \
    12412ab3d-1515-2217-96f5-0338184fcc04 eastus2 \
    --instance-type e2s_v3 \
    --high-availability \
    --endpoint public \
    --activate-region
    ```

The script displays the following output:
<!--The output needs to be modified -->

-   Whether your AWS account restricts vCPUs for the `Standard_D2_v4` and `Standard_E2s_v3` VM size families in your region (and availability zone, if HA is enabled). Open a support request to remove SKU restrictions for the VM families with `NotAvailableForSubscription` displayed in the `Restrictions` column. See [Fix issues with SKU restrictions](#fix-issues-with-sku-restrictions).

    ```
    #######################
    # Virtual-Machine SKU #
    #######################

    ResourceType      Locations              Name                    Zones    Restrictions
    ------------      ---------              ----                    -----    ------------
    virtualMachines   eastus2                Standard_D2_v4          1,2,3    None
    virtualMachines   eastus2                Standard_E2s_v3         1,2,3    NotAvailableForSubscription, type: Zone, locations: eastus2, zones: 1,3

    ```

-   Whether your AWS account has sufficient limits on vCPUs and IP addresses for your region. Open a support request to raise limits for the vCPUs and IP addresses if they exceed the available VM families with `NotAvailableForSubscription` displayed in the `Restrictions` column. See [Increase Public IP addresses](#increase-public-ip-addresses-limits) and [Increase vCPU limits](#increase-vcpu-limits).

    ```
    #######################
    # Quota Limitation #
    #######################

     Resource                        Limit   Used    Available    Gap   Suggestion
     Total Regional vCPUs            130     27      103          89    OK
     Standard Dv4 Family vCPUs       20      14      6            0     Need Increase
     Standard ESv3 Family vCPUs      20      4       16           8     OK
     Public IP Addresses — Basic     20      11      9            8     OK
     Public IP Addresses — Standard  20      3       17           16    OK
    ```
