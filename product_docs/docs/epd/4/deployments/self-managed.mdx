---
title: "TPAexec"
---

The standard way of deploying EDB Distributed Postgres in self managed setting,
including physical and virtual machines, both self-hosted and in the cloud
(i.e. EC2) is to use EDB's deployment tool called TPAexec.

TPAexec is an orchestration tool which can be used to build Postgres clusters
according to a Trusted Postgres Architecture (TPA) specification.

TPA represents the best practices followed by EnterpriseDB and its
recommendations are as applicable to quick testbed setups as to production
environments.

## Quick Setup with TPAexec

The following steps will setup EDB Distributed Postgres with the Always-ON Silver
architecture using Amazon EC2.

First, we generate configuration file using the `configure` command:
```
$ tpaexec configure myedbdpcluster --architecture BDR-Always-ONO --layout Silver --platform aws
```

This will create a subdirectory directory in current working directory called
`myedbdpcluster`. In that directory there will be `config.yml` with configuration
TPAexec needs to crate the cluster. You can edit the `config.yml` as needed,
for example changing the ip address range used for servers, or adjusting locations
of nodes.

Next, we provision the cluster, in the case of the current example, this will
create the EC2 instances, configure VPC, etc:
```
tpaexec provision myedbdpcluster
```

Finally, we can deploy the needed packages, configuration and setup the actual
EDB Distributed Postgres cluster:
```
tpaexec deploy myedbdpcluster
```

After the successful run of the `deploy` command the cluster will be ready to use,
use can connect to it via `psql`, or any other database client.

It's also possible to run a test that ensures the cluster is running as expectec:
```
tpaexec test myedbdpcluster
```
