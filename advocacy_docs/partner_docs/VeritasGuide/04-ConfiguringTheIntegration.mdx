---
title: 'Configuring the Integration'
description: 'Walkthrough on configuring Veritas NetBackup for PostgreSQL'
---

**Implementing Veritas NetBackup solution for backup/restore of PostgreSQL databases requires the following components:**

- Postgres server installed and operational
- Veritas NetBackup Server installed and operational
- Veritas NetBackup Client installed
- Veritas NetBackup Agent for PostgreSQL installed

### Prerequisites

- A running EDB Postgres Advanced Server (EPAS)
- A running Veritas NetBackup Server with a DataStore Policy set up
- Veritas NetBackup Client installed on the EPAS host
- Veritas NetBackup PostgreSQL Agent installed on the EPAS host


Verify the DataStore Policy on the Veritas NetBackup Server using the Administration Console

<p align="center">
    <img  src="Images/NetBackupAdminConsole.png">
</p>
<p align="center">
    <img  src="Images/NetBackupDataPolicy.png">
</p>


### Configuring Veritas NetBackup for PostgreSQL

This entails configuring the following components:
- Veritas NetBackup Agent for PostgreSQL
- PostgreSQL server

!!! Note
    For detailed information, refer to the [Veritas NetBackup for PostgreSQL Administrator's Guide](https://www.veritas.com/content/support/en_US/doc/129277259-150015228-0/v129277275-150015228).


The following steps show an example of how to configure NetBackup for PostgreSQL for EPAS version 13.

#### Configuring Veritas NetBackup Agent for PostgreSQL

1.  Update configuration file `/usr/NBPostgreSQLAgent/nbpgsql.conf` to set the following parameters:
    ```
    DB_USER= enterprisedb
    DB_PORT=5444
    DB_INSTANCE_NAME=edb
    PGSQL_LIB_INSTALL_PATH= /usr/edb/as13/lib
    MASTER_SERVER_NAME=<veritas-master-server-name>
    POLICY_NAME=<datastore-policy-name>
    SCHEDULE_NAME= Default-Application-Backup
    SNAPSHOT_SIZE=4MB
    ```
#### Configuring EPAS

2.	Create the archivedir directory

3.	Set the following parameters in the postgresql.conf file:
    ```
    wal_level = archive
    archive_mode = on
    archive_timeout =0
    statement_timeout=0
    archive_command=test ! -f <archivedir>/%f && cp %p <archivedir>/%f
    ```

4.	Restart the PostgreSQL server

