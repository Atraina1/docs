---
title: 'Configuring the Integration'
description: 'Walkthrough on configuring Veritas NetBackup for PostgreSQL'
---

**Implementing Veritas NetBackup solution for backup/restore of PostgreSQL databases requires the following components:**

- Postgres server installed and operational.
- Veritas NetBackup Server installed and operational.
- Veritas NetBackup Client installed.
- Veritas NetBackup Agent for PostgreSQL installed.

### Prerequisites

- A running EDB Postgres Advanced Server (EPAS).
- A running Veritas NetBackup Server with a DataStore Policy set up.
- Veritas NetBackup Client installed on the EPAS host.
- Veritas NetBackup PostgreSQL Agent installed on the EPAS host.


Configuring Veritas NetBackup for PostgreSQL consists of configuring the following components:
- Veritas NetBackup Agent for PostgreSQL.
- PostgreSQL server.

The steps below show an example of how to configure Veritas NetBackup for PostgreSQL for EPAS version 13.

#### Configuring Veritas NetBackup Agent for PostgreSQL

1. Use the hostname for your NetBackup Master Server and credentials for the **root** user to log on to the NetBackup Administration Console:

<p align="center">
    <img  src="Images/NetBackupAdminConsole.png">
</p>

2. Within the Admin Console, click **NetBackup Management > Policies** and verify a policy of the type **DataStore** exists:

<p align="center">
    <img  src="Images/NetBackupDataPolicy.png">
</p>

Refer to the [Veritas NetBackup Administrator's Guide](https://www.veritas.com/content/support/en_US/doc/18716246-126559472-0/v42176014-126559472) for detailed information on policies.

3.  On the NetBackup Client, update the agent configuration file `/usr/NBPostgreSQLAgent/nbpgsql.conf` to set the necessary parameters:
    ```
    DB_USER= enterprisedb
    DB_PORT=5444
    DB_INSTANCE_NAME=edb
    PGSQL_LIB_INSTALL_PATH= /usr/edb/as13/lib
    MASTER_SERVER_NAME=<netbackup-master-server>
    POLICY_NAME=<datastore-policy>
    SCHEDULE_NAME= Default-Application-Backup
    SNAPSHOT_SIZE=4MB
    ```


!!! Note
    Values of **MASTER_SERVER_NAME** and **POLICY_NAME** paramters must match the names of your NetBackup Master Server and DataStore Policy respectively.

Refer to the [Veritas NetBackup for PostgreSQL Administrator's Guide](https://www.veritas.com/content/support/en_US/doc/129277259-150015228-0/v129276458-150015228) for detailed description of the parameters.



#### Configuring EPAS

These configuration steps must be performed on the EPAS server.

1.	Create the archivedir directory at your desired location.

2.	Set the required parameters in the postgresql.conf file:
    ```
    wal_level = archive
    archive_mode = on
    archive_timeout =0
    statement_timeout=0
    archive_command=test ! -f <archivedir>/%f && cp %p <archivedir>/%f
    ```

3.	Restart the PostgreSQL server.

Refer to the [Veritas NetBackup for PostgreSQL Administrator's Guide](https://www.veritas.com/content/support/en_US/doc/129277259-150015228-0/v129903049-150015228) for detailed information on how to configure EPAS for Veritas NetBackup Agent for PostgreSQL.

